<section class="landing">
  <div class="landing-copy">
    <p class="eyebrow">The Chatter, Decoded</p>
    <h2>Company commentary with clean quote structure.</h2>
    <p>
      Open any company to see quotes grouped by edition, with context, the exact statement,
      and who said it.
    </p>
  </div>
  <div class="landing-metrics">
    <div class="metric-grid">
      <article class="metric-card">
        <p>Companies</p>
        <strong>{{ total_companies }}</strong>
      </article>
      <article class="metric-card">
        <p>Quotes</p>
        <strong>{{ total_quotes }}</strong>
      </article>
      <article class="metric-card">
        <p>Editions</p>
        <strong>{{ total_editions }}</strong>
      </article>
    </div>
  </div>
</section>

<section class="search-panel">
  <label for="companySearch">Search companies</label>
  <input type="search" placeholder="Type a company name..." id="companySearch" />
  <span id="resultCount">{{ total_companies }} shown</span>
</section>

<div class="company-list" id="companyList">
  {{ company_cards }}
</div>

<script>
  const input = document.getElementById('companySearch');
  const list = document.getElementById('companyList');
  const resultCount = document.getElementById('resultCount');
  const items = Array.from(list.querySelectorAll('[data-name]'));

  function updateCount() {
    const visible = items.filter((item) => item.style.display !== 'none').length;
    resultCount.textContent = `${visible} shown`;
  }

  input.addEventListener('input', () => {
    const value = input.value.trim().toLowerCase();
    items.forEach((item) => {
      const name = item.getAttribute('data-name');
      item.style.display = name.includes(value) ? '' : 'none';
    });
    updateCount();
  });

  updateCount();
</script>
